{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}


{% block body %}

<section id="schedule">

    <h1 class="end_schelude">Итоговый вариант расписания</h1>

    <div class="container schedule">
        <table class="table table-bordered text-center table-striped">
            <thead>
                <tr class="bg-light-gray">
                    <th scope="col" class="text-uppercase">Время</th>
                    {% for day in all_days: %}
                    <th scope="col" class="text-uppercase">{{ day }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                <tr>
                    {% for time, db in schelude.items(): %}
                    <th scope="row">{{ time }}</th>
                    <td class="{{ all_days[0] }}">
                        {{ db.get(all_days[0])[0] if db.get(all_days[0]) else '' }}
                        <br>
                        {{ db.get(all_days[0])[1] if db.get(all_days[0]) else '' }}
                    </td>
                    <td class="{{ all_days[1] }}">
                        {{ db.get(all_days[1])[0] if db.get(all_days[1]) else '' }}
                        <br>
                        {{ db.get(all_days[1])[1] if db.get(all_days[1]) else '' }}
                    </td>
                    <td class="{{ all_days[2] }}">
                        {{ db.get(all_days[2])[0] if db.get(all_days[2]) else '' }}
                        <br>
                        {{ db.get(all_days[2])[1] if db.get(all_days[2]) else '' }}
                    </td>
                    <td class="{{ all_days[3] }}">
                        {{ db.get(all_days[3])[0] if db.get(all_days[3]) else '' }}
                        <br>
                        {{ db.get(all_days[3])[1] if db.get(all_days[3]) else '' }}
                    </td>
                    <td class="{{ all_days[4] }}">
                        {{ db.get(all_days[4])[0] if db.get(all_days[4]) else '' }}
                        <br>
                        {{ db.get(all_days[4])[1] if db.get(all_days[4]) else '' }}
                    </td>
                    <td class="{{ all_days[5] }}">
                        {{ db.get(all_days[5])[0] if db.get(all_days[5]) else '' }}
                        <br>
                        {{ db.get(all_days[5])[1] if db.get(all_days[5]) else '' }}
                    </td>
                    <td class="{{ all_days[6] }}">
                        {{ db.get(all_days[6])[0] if db.get(all_days[6]) else '' }}
                        <br>
                        {{ db.get(all_days[6])[1] if db.get(all_days[6]) else '' }}
                    </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>

</section>

<section id="edit_schelude">
    <h1 class="edit_schelude">Изменить, удалить расписание</h1>
    <div class="container">
        <table class="table table-bordered text-center table-striped">
            <thead>
                 
                <th scope="col">Имя учителя</th>
                <th scope="col">Название курса</th>
                <th scope="col">День занятия</th>
                <th scope="col">Время начала занятий</th>
                <th scope="col">Время окончания занятий</th>
                <th scope="col">Изменить</th>
                <th scope="col">Удалить</th>

            </thead>

            <tbody>
                {% for db in rsp: %}
                <tr>
                    <th scope="row">{{ db.teacher }}</th>
                    <th scope="row">{{ db.course }}</th>
                    <th scope="row">{{ db.day }}</th>
                    <th scope="row">{{ db.start_time }}</th>
                    <th scope="row">{{ db.end_time }}</th>
                    <th scope="row"><a href="{{ url_for('edit_schelude', schelude_id=db.id) }}"><i class="fa-solid fa-pen-to-square"></i></a></th>
                    <th scope="row"><a href="{{ url_for('remove_schelude', schelude_id=db.id) }}"><i class="fa-solid fa-trash-can"></i></a></th>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>

<section id="add_schelude">
    <div class="container add_schelude">

        {% with messages = get_flashed_messages() %}
        {% if messages: %}
        {% for message in messages: %}
        <p class="flash-message">{{ message }}</p>
        {% endfor %}
        {% endif %}
        {% endwith %}
        {{ wtf.quick_form(form, novalidate=True, button_map={"add_schelude": "primary"}) }}

    </div>

</section>


{% endblock %}